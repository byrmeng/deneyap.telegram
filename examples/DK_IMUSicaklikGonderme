#include <WiFi.h>
#include <DeneyapTelegram.h>
#include <lsm6dsm.h>

DeneyapTelegram telegram;

#define WIFI_SSID "***" // Wifi Adı
#define WIFI_PASS "***" // Wifi Şifresi

String ID = "***";
float sicaklik;
unsigned long timer = 0;

LSM6DSM IMU;
void setup() {
  Serial.begin(115200);
  IMU.begin();
  WiFi.begin(WIFI_SSID, WIFI_PASS);
  Serial.print("Wi-Fi Baglanıyor...");
  while (WiFi.status() != WL_CONNECTED)
  {
    Serial.print(".");
  }
  Serial.println("Baglandi");
  telegram.begin("***"); // Telegram Bot Tokeniniz
  telegram.send(ID, "Telegram bağlandı."); // Kanal ID ve Mesaj
}

void loop() {
  sicaklik = IMU.readTempC();
  sicaklik = round(sicaklik * 100) / 100;
  Serial.println(sicaklik);
  if (sicaklik >= 35) {
    if (millis() - timer > 3000) {
      telegram.send(ID,"Sıcaklık: "+String(sicaklik)+" dereceye yükseldi.");
      timer = millis();
    }
  }
}
